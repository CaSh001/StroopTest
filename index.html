<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Stroop Test</title>
    </head>
    <style>
    html,
    body {
      margin: 0 auto;
      padding: 0;
      height: 100%;
    }

    #game {
        position:relative;
      margin: 10px auto;

      height: 640px;
    }
  </style>
    <body>
    <div id="game">
     <div id="btn" style = "position: absolute;top:700px;left: 50%;margin-top: -20px;margin-left: -50px;background-color: black;width:100px;height:40px;text-align:center;line-height:40px;color:white;cursor:pointer;" onclick = "changeColor()">Finish Subset</div>
    </div>
        <script src="js/phaser.min.js" type="text/javascript" charset="utf-8"></script>

        <script type="text/javascript">
var game=new Phaser.Game(1024,768,Phaser.AUTO,'game',{preload:preload,create:create,update:update});
function preload() {
      //  game.load.crossOrigin = "anonymous";
 //   game.load.image("button","assets/Button.jpg")
    game.scale.pageAlignHorizontally = true;
    game.scale.pageAlignVertically = true;
}

var textStyle= { font: "25px Arial", fill: "#000000", align:"center" };
var textStyleRed= { font: "25px Arial", fill: "#FF0000", align:"center" };
var textStyleBlue= { font: "25px Arial", fill: " #0000FF", align:"center" };
var textStyleYellow= { font: "25px Arial", fill: "#FFa500", align:"center" };
var textStyleGreen= { font: "25px Arial", fill: "#008000", align:"center" };
var failTextStyle= { font: "100px Arial", fill: "#000000", align:"center" };
var arr = [[]];
var content = [];
var timer = 0;
var isGameOver = false;
var level = 0;
var timelimit = 45

function addTimer(){
    if(isGameOver == false){
        timer += 1;
    }

    if(timer >= timelimit && isGameOver == false && level < 3){
        isGameOver = true;
        for(var i = 0; i < 5; i++){
            for(var j = 0; j < 10; j++){
                arr[i][j].setText("");
            }
        }
        var text = game.add.text(game.world.centerX, game.world.centerY, "Fail", failTextStyle);
        text.anchor.set(0.5, 0.5);
    }
   
}

function changeColor(){
    timer = 0;
    level = level + 1;
    if(level == 1){
        for(var i = 0; i < 5; i++){
            for(var j = 0; j < 10; j++){
                switch(content[i][j]){
                case "RED":
                    arr[i][j].setStyle(textStyleRed);
                    break;
                case "BLUE":
                    arr[i][j].setStyle(textStyleBlue);
                    break;
                case "GREEN":
                    arr[i][j].setStyle(textStyleGreen);
                    break;
                case "YELLOW":
                    arr[i][j].setStyle(textStyleYellow);
                    break;
                }
            }
        }
    }
    else if(level == 2){
        for(var i = 0; i < 5; i++){
            for(var j = 0; j < 10; j++){
                randomNum = randomRange(0,4);
                switch(randomNum){
                case 0:
                    arr[i][j].setStyle(textStyleRed);
                    break;
                case 1:
                    arr[i][j].setStyle(textStyleBlue);
                    break;
                case 2:
                    arr[i][j].setStyle(textStyleGreen);
                    break;
                case 3:
                    arr[i][j].setStyle(textStyleYellow);
                    break;
                }
            }
        }
    }

}
    
function create() {
    arr = new Array();
    game.stage.smoothed=false;
    game.stage.backgroundColor = '#ffffff';
    var str = ['RED','BLUE','GREEN','YELLOW'];
    for(var i = 0; i < 5; i++){
        arr[i] = [];
        content[i] = [];
        for(var j = 0; j < 10; j++){
            randomNum = randomRange(0,4);
            arr[i][j] =game.add.text(game.world.centerX + (170 * (i - 2)), j * 60 + 60, str[randomNum], textStyle);
            arr[i][j].anchor.set(0.5, 0.5);
            content[i][j] = str[randomNum];
        }
    }
    setInterval("addTimer()","1000"); //keep this here so it's not dependant on fps
}

function update() {

}

function render() {

}

function randomRange(min, max) { // min最小值，max最大值

    return Math.floor(Math.random() * (max - min)) + min;

}
        </script>
           
    </body>
</html>